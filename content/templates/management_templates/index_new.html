{% extends 'management_templates/base.html' %}

{% load i18n %}
{% load static %}
{% block dashboard %}
    <link rel="apple-touch-icon" href="{% static "assets_backend/images/ico/apple-icon-120.png" %}">
    <link rel="shortcut icon" type="image/x-icon" href="{% static "assets_backend/images/ico/favicon.ico" %}">


    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/font_muli.css" %}">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/vendors/css/vendors.min.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/vendors/css/charts/chartist.css" %}">
    <link rel="stylesheet" type="text/css"
          href="{% static "assets_backend/vendors/css/charts/chartist-plugin-tooltip.css" %}">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    {#    TODO: 处理冲突 #}
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/bootstrap.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/bootstrap-extended.css" %}">


    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/colors.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/components.css" %}">

    <link rel="stylesheet" type="text/css"
          href="{% static "assets_backend/vendors/css/charts/chartist-plugin-tooltip.css" %}">



    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/core/colors/palette-gradient.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/core/colors/palette-gradient.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/fonts/simple-line-icons/style.min.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/pages/chat-application.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/pages/advanced-cards.css" %}">



    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css"
          href="{% static "assets_backend/css/core/menu/menu-types/vertical-menu.css" %}">
    <link rel="stylesheet" type="text/css"
          href="{% static "assets_backend/css/core/colors/palette-gradient.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/plugins/charts/chartist.css" %}">

    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/pages/chat-application.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/pages/dashboard-analytics.css" %}">

    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="{% static "assets_backend/css/style.css" %}">
    <!-- END: Custom CSS-->

    {#        #}
    {#    <!-- bootstrap & fontawesome -->#}
    {#    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet">#}
    <link href="{% static 'assets/font-awesome/4.5.0/css/font-awesome.min.css' %}"
          rel="stylesheet">


    <!-- ace styles -->
    <link rel="icon" href="{% static 'favicon.ico' %}">

    <link href="{% static 'assets/css/fonts.googleapis.com.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/ace.min.css' %}" rel="stylesheet" class="ace-main-stylesheet" id="main-ace-style">
    <link rel="stylesheet" href="{% static 'assets/css/ace-skins.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'assets/css/ace-rtl.min.css' %}"/>
    <script src="{% static 'assets/js/ace-extra.min.js' %}"></script>


    <style>
        .page-content {
            overflow: auto;
            background-color: #FFF;
            position: relative;
            margin: 0;
            padding: 8px 0px 0px 16px !important;
            max-height: 647px;
        }

        .page-content > .row > .col-xs-12 {
            margin-left: -0px;
            margin-right: -0px;
        }

        .page-content > .row {
            margin-left: 0;
            margin-right: 0;

        }

        body {
            font-family: "Comfortaa", serif !important;
        }

        h1, h2, ~ h3, h4, h5, h6 {
            font-family: "Comfortaa", serif !important;
        }

        .nav-list li {
            width: 100%;
        }

        .navbar {
            display: block;
            height: 50px;
            padding: 0 !important;
        }

        .ace-nav {
            display: inline-block !important;
        }

        .navbar-container {
            padding: 0px;
            display: flex;
            justify-content: space-between;
        }

        .navbar-header {
            padding: 0;
        }

        .navbar-container {
            padding: 0 !important;
        }

        .navbar-buttons {
            width: 350px;
        }

        .navbar-header {
            padding-left: 25px;
        }

        .navbar {
            height: 45px;
        }

        .dropdown-toggle::after, .footer {
            display: none !important;
        }

        .round {
            border-radius: 1.5rem;
        }

        .bg-hexagons.card-body {
            height: 145px;
        }

        .media-body {
            overflow: unset !important;
        }

        .card-body .width-100 {
            width: 100px;
        }

        .big-card .btn-danger, .big-card .btn-danger.focus, .big-card .btn-danger:focus, .big-card .btn-danger:focus, .big-card .btn-danger:active {
            background-color: #fa7179 !important;
            border-color: #fa7179 !important;
            -webkit-box-shadow: 0 1px 2px 0 rgb(250 98 107 / 45%), 0 1px 3px 1px rgb(250 98 107 / 30%) !important;
            box-shadow: 0 1px 2px 0 rgb(250 98 107 / 45%), 0 1px 3px 1px rgb(250 98 107 / 30%) !important;
            color: #FFFFFF !important;
        }

        #report_btn {
            border-radius: 1.5em;
            background-color: #fa7179 !important;
            padding: 0px 20px;
            border-radius: 15px;
        }

        .card-header {
            padding: 1.5rem 1.5rem;
        }

        .card-title {
            margin-top: 0;
            font-size: 1.82rem;
        }

        .bg-hexagons .text-muted {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            right: 125px;
            font-size: 15px;
            width: 123px;
        }

        .big-card .btn-bg-gradient-x-red-pink.btn-glow {
            -webkit-box-shadow: 0 0 12px 0 #ff5858 !important;
            box-shadow: 0 0 12px 0 #ff5858 !important;
        }

        .big-card .btn-bg-gradient-x-red-pink {
            border: none !important;
            color: #fff !important;
            background-image: -webkit-gradient(linear, left top, right top, from(#ff5858), color-stop(50%, #e888b7), to(#ff5858)) !important;
            background-image: -webkit-linear-gradient(left, #ff5858 0%, #e888b7 50%, #ff5858 100%) !important;
            background-image: -moz-linear-gradient(left, #ff5858 0%, #e888b7 50%, #ff5858 100%) !important;
            background-image: -o-linear-gradient(left, #ff5858 0%, #e888b7 50%, #ff5858 100%) !important;
            background-image: linear-gradient(90deg, #ff5858 0%, #e888b7 50%, #ff5858 100%) !important;
            -webkit-background-size: 200% auto !important;
            background-size: 200% auto !important;
            -webkit-transition: 0.5s !important;
            -o-transition: 0.5s !important;
            -moz-transition: 0.5s !important;
            transition: 0.5s !important;
        }

        .big-card .btn, .big-card .btn.focus, .big-card .btn:focus {
            border-color: #ffffff !important;
            background-image: -webkit-gradient(linear, left top, right top, from(#ff5858), color-stop(50%, #e888b7), to(#ff5858)) !important;
            background-image: -webkit-linear-gradient(left, #ff5858 0%, #e888b7 50%, #ff5858 100%) !important;
        }

        .heading-elements button {
            background: #ff5858 !important;
        }

        .page-header {
            display: none;
        }

        span.color:after {
            content: '\00a0\00a0\00a0\00a0';
        }

        span.color {
            margin: 0 2px;
            border-radius: 50%;
        }

        .total-card {
            cursor: pointer;
        }
    </style>
{% endblock %}


{% block location %}
    <ul class="breadcrumb">
        <li>
            <i class="ace-icon fa fa-home home-icon"></i>
            <a href="#">{% trans "Home" %}</a>
        </li>
    </ul><!-- /.breadcrumb -->
{% endblock %}

{% block page_header %}
    <div class="page-header">
        <h1>
            Home
            <small>
                <i class="ace-icon fa fa-angle-double-right"></i>
            </small>
        </h1>
    </div>
{% endblock %}

<!-- BEGIN: Content-->
{% block content %}
    <div class="app-content content">
        <div class="content-wrapper">
            <div class="content-wrapper-before"></div>
            <div class="content-header row">
            </div>
            <div class="content-body">
                <!-- Revenue, Hit Rate & Deals -->
                <div class="row">
                    <div class="col-lg-8 col-md-12 big-card">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">{% trans "Orders (Chinese" %}<span class="color" title="#f83a22"
                                                                                          style="background-color:#edd5ff;"
                                                                                          data-color="#f83a22"
                                                                                          role="button"
                                                                                          tabindex="0">
                                    </span>{% trans "/ Western" %}<span class="color" title="#f83a22"
                                                                        style="background-color: #c3edda;"
                                                                        data-color="#f83a22" role="button" tabindex="0">
                                    </span>)
                                </h4>
                                <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                <div class="heading-elements">
                                    <ul class="list-inline mb-0">
                                        <li>
                                            <style>
                                                .card-header .heading-elements, .card-header .heading-elements-toggle {
                                                    top: 12px;
                                                }
                                            </style>
                                            <button type="button"
                                                    class="btn btn-glow btn-round btn-bg-gradient-x-red-pink"
                                                    style="border-radius: 20% !important">
                                                <a href="{% url 'echarts:chart2' %}"
                                                   style="color: white "> Order Data Digital Screen </a>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-content collapse show">
                                <div class="card-body p-0 pb-0">
                                    <div class="chartist">
                                        <div id="project-stats" class="height-350 areaGradientShadow1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">{% trans "Revenue (Real" %}<span class="color" title="#f83a22"
                                                                                        style="background-image:linear-gradient(90deg, #fbb6b9 0%, #db69ad 50%, #b55adf 100%) !important;"
                                                                                        data-color="#f83a22"
                                                                                        role="button"
                                                                                        tabindex="0">
                                    </span>
                                    {% trans "/ Forecast" %}
                                    <span class="color" title="#f83a22"
                                          style="background-color:#e1dede;"
                                          data-color="#f83a22" role="button"
                                          tabindex="0">
                                    </span>
                                    )
                                </h4>
                                <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                {#                                <div class="heading-elements">#}
                                {#                                    <ul class="list-inline mb-0">#}
                                {#                                        <li>#}
                                {#                                            <button type="button"#}
                                {#                                                    class="btn btn-glow btn-round btn-bg-gradient-x-red-pink">#}
                                {#                                                <a href="{% url 'echarts:chart1' %}"> More </a>#}
                                {#                                            </button>#}
                                {#                                        </li>#}
                                {#                                    </ul>#}
                                {#                                </div>#}
                                <div class="heading-elements">
                                    <ul class="list-inline mb-0">
                                        <li>
                                            <style>
                                                .card-header .heading-elements, .card-header .heading-elements-toggle {
                                                    top: 12px;
                                                }
                                            </style>
                                            <button type="button"
                                                    class="btn btn-glow btn-round btn-bg-gradient-x-red-pink"
                                                    style="border-radius: 20% !important">
                                                <a href="{% url 'echarts:chart1' %}"
                                                   style="color: white ">{% trans "Revenue Data Digital Screen " %}</a>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-content collapse show">
                                <div class="card-body p-0 pb-0">
                                    <div class="chartist">
                                        <div id="gradient-line-chart1" class="height-400 GradientlineShadow1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4 col-lg-4 col-md-12">
                        <div class="card ecom-card-1 bg-white">
                            <div class="card-content ecom-card2 height-180">
                                <h5 class="text-muted success position-absolute p-1">{% trans "Trend of all Orders" %}</h5>
                                <div>
                                    <i class="icon-pie-chart success font-large-1 float-right p-1"></i>
                                </div>
                                <div class="progress-stats-container ct-golden-section height-75 position-relative pt-3">
                                    <div id="progress-stats-bar-chart1">
                                        <svg xmlns:ct="http://gionkunz.github.com/chartist-js/ct" width="100%"
                                             height="100%" class="ct-chart-bar" style="width: 100%; height: 100%;">
                                            <g class="ct-grids"></g>
                                            <g>
                                                <g class="ct-series ct-series-a">
                                                    <line x1="41.49017987932478" x2="41.49017987932478" y1="115" y2="15"
                                                          class="ct-bar" ct:value="20"
                                                          style="stroke-width: 25px"></line>
                                                    <line x1="104.47053963797433" x2="104.47053963797433" y1="115"
                                                          y2="30" class="ct-bar" ct:value="17"
                                                          style="stroke-width: 25px"></line>
                                                    <line x1="167.4508993966239" x2="167.4508993966239" y1="115" y2="45"
                                                          class="ct-bar" ct:value="14"
                                                          style="stroke-width: 25px"></line>
                                                    <line x1="230.43125915527344" x2="230.43125915527344" y1="115"
                                                          y2="25" class="ct-bar" ct:value="18"
                                                          style="stroke-width: 25px"></line>
                                                    <line x1="293.411618913923" x2="293.411618913923" y1="115" y2="15"
                                                          class="ct-bar" ct:value="20"
                                                          style="stroke-width: 25px"></line>
                                                    <line x1="356.3919786725726" x2="356.3919786725726" y1="115" y2="40"
                                                          class="ct-bar" ct:value="15"
                                                          style="stroke-width: 25px"></line>
                                                    <line x1="419.3723384312221" x2="419.3723384312221" y1="115" y2="25"
                                                          class="ct-bar" ct:value="18"
                                                          style="stroke-width: 25px"></line>
                                                </g>
                                            </g>
                                            <g class="ct-labels">
                                                <foreignObject style="overflow: visible;" x="10" y="120"
                                                               width="62.980359758649556" height="20"><span
                                                        class="ct-label ct-horizontal ct-end"
                                                        xmlns="http://www.w3.org/2000/xmlns/"
                                                        style="width: 63px; height: 20px;">{% trans "Mon" %}</span>
                                                </foreignObject>
                                                <foreignObject style="overflow: visible;" x="72.98035975864956" y="120"
                                                               width="62.980359758649556" height="20"><span
                                                        class="ct-label ct-horizontal ct-end"
                                                        xmlns="http://www.w3.org/2000/xmlns/"
                                                        style="width: 63px; height: 20px;">{% trans "Tue" %}</span>
                                                </foreignObject>
                                                <foreignObject style="overflow: visible;" x="135.9607195172991" y="120"
                                                               width="62.98035975864954" height="20"><span
                                                        class="ct-label ct-horizontal ct-end"
                                                        xmlns="http://www.w3.org/2000/xmlns/"
                                                        style="width: 63px; height: 20px;">{% trans "Wex" %}</span>
                                                </foreignObject>
                                                <foreignObject style="overflow: visible;" x="198.94107927594865" y="120"
                                                               width="62.98035975864957" height="20"><span
                                                        class="ct-label ct-horizontal ct-end"
                                                        xmlns="http://www.w3.org/2000/xmlns/"
                                                        style="width: 63px; height: 20px;">{% trans "Thu" %}</span>
                                                </foreignObject>
                                                <foreignObject style="overflow: visible;" x="261.9214390345982" y="120"
                                                               width="62.98035975864957" height="20"><span
                                                        class="ct-label ct-horizontal ct-end"
                                                        xmlns="http://www.w3.org/2000/xmlns/"
                                                        style="width: 63px; height: 20px;">{% trans "Fri" %}</span>
                                                </foreignObject>
                                                <foreignObject style="overflow: visible;" x="324.9017987932478" y="120"
                                                               width="62.98035975864951" height="20"><span
                                                        class="ct-label ct-horizontal ct-end"
                                                        xmlns="http://www.w3.org/2000/xmlns/"
                                                        style="width: 63px; height: 20px;">{% trans "Sat" %}</span>
                                                </foreignObject>
                                                <foreignObject style="overflow: visible;" x="387.8821585518973" y="120"
                                                               width="62.98035975864957" height="20"><span
                                                        class="ct-label ct-horizontal ct-end"
                                                        xmlns="http://www.w3.org/2000/xmlns/"
                                                        style="width: 63px; height: 20px;">{% trans "Sun" %}</span>
                                                </foreignObject>
                                            </g>
                                        </svg>
                                    </div>
                                    <div id="progress-stats-line-chart1" class="progress-stats-shadow"></div>
                                </div>
                            </div>
                        </div>

                        <div class="card pull-up bg-gradient-directional-danger">
                            <div class="card-header bg-hexagons-danger">
                                <h4 class="card-title white">{% trans "Monthly Order Analytics" %}</h4>
                                <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                <div class="heading-elements">
                                    <ul class="list-inline mb-0">
                                        <li>
                                            <a class="btn btn-sm btn-white danger box-shadow-1 round btn-min-width pull-right"
                                               href="/management/order_management/all/"
                                               target="_blank">{% trans "Report " %}<i
                                                    class="ft-bar-chart pl-1"></i></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-content collapse show bg-hexagons-danger">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="align-self-center width-100">
                                            <div id="Analytics-donut-chart" class="height-100 donutShadow"></div>
                                        </div>
                                        <div class="media-body text-right mt-1">
                                            <h3 class="font-large-2 white">
                                                {% if compare_monthly.0 == 1 %}
                                                    +{{ compare_monthly.1 }}
                                                    <style>
                                                        #Analytics-donut-chart svg {
                                                            -moz-transform: scaleY(-1);
                                                            -webkit-transform: scaleY(-1);
                                                            -o-transform: scaleY(-1);
                                                            transform: scaleY(-1);
                                                        }

                                                        .bg-gradient-directional-danger {
                                                            background-image: linear-gradient(45deg, #f65b00, #ffdab4);
                                                        }

                                                        .bg-hexagons-danger {
                                                            background-image: none;
                                                        }
                                                    </style>
                                                {% else %}
                                                    {{ compare_monthly.1 }}
                                                {% endif %}

                                            </h3>
                                            <h6 class="mt-1"><span class="text-muted white">{% trans "Compared " %}<br>
                                               <a href="#"
                                                  class="darken-2 white">{% trans " to last month" %}</a></span>
                                            </h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {#                        <div class="card ">#}
                        {#                            <div class="card-header bg-hexagons">#}
                        {#                                <h4 class="card-title ">{% trans "Statistics" %}</h4>#}
                        {#                                <div class="heading-elements">#}
                        {#                                    <ul class="list-inline d-block mb-0">#}
                        {#                                        <li>#}
                        {#                                            <a id="report_btn"#}
                        {#                                               class="btn btn-sm btn-danger danger box-shadow-3 round btn-min-width pull-right"#}
                        {#                                               href="{% url 'echarts:chart2' %}" target="_blank">#}
                        {#                                                <span class="white">{% trans "Report" %}</span>#}
                        {#                                                <i class="ft-bar-chart pl-1 white"></i>#}
                        {#                                            </a>#}
                        {#                                        </li>#}
                        {#                                    </ul>#}
                        {#                                </div>#}
                        {#                            </div>#}
                        {#                            <div class="card-content collapse show bg-hexagons">#}
                        {#                                <div class="card-body pt-0 pb-1">#}
                        {#                                    <div class="media d-flex">#}
                        {#                                        <div class="align-self-center width-100">#}
                        {#                                            <div id="statistics-donut-chart" class="height-100 donutShadow">#}
                        {#                                                <svg xmlns:ct="http://gionkunz.github.com/chartist-js/ct" width="100%"#}
                        {#                                                     height="100%" class="ct-chart-donut"#}
                        {#                                                     style="width: 100%; height: 100%;">#}
                        {#                                                    <g class="ct-series ct-series-a">#}
                        {#                                                        <path d="M49.992,5A45,45,0,1,0,50,5L50,10A40,40,0,1,1,49.993,10Z"#}
                        {#                                                              class="ct-slice-donut-solid" ct:value="100"></path>#}
                        {#                                                    </g>#}
                        {#                                                    <g>#}
                        {#                                                        <text dx="50" dy="54.700000286102295" text-anchor="middle"#}
                        {#                                                              class="ct-label" font-family="feather">#}
                        {#                                                        </text>#}
                        {#                                                    </g>#}
                        {#                                                    <defs>#}
                        {#                                                        <linearGradient id="donutGradient2" x1="0" y1="1" x2="0" y2="0">#}
                        {#                                                            <stop offset="0%" stop-color="rgba(253,99,107,1)"></stop>#}
                        {#                                                            <stop offset="95%"#}
                        {#                                                                  stop-color="rgba(253,99,107, 0.3)"></stop>#}
                        {#                                                        </linearGradient>#}
                        {#                                                    </defs>#}
                        {#                                                </svg>#}
                        {#                                            </div>#}
                        {#                                        </div>#}
                        {#                                        <div class="media-body text-right mt-2">#}
                        {#                                            <h3 class=" font-large-2 blue-grey lighten-1 ">{{ finished_orders.count }}#}
                        {#                                            </h3>#}
                        {#                                            <h6 class="mt-1">#}
                        {#                                                                            <span class="text-muted">orders finished in#}
                        {#                                                                                <a href="#"#}
                        {#                                                                                   class="darken-2">{% trans "this year." %}</a>#}
                        {#                                                                            </span>#}
                        {#                                            </h6>#}
                        {#                                        </div>#}
                        {#                                    </div>#}
                        {#                                </div>#}
                        {#                            </div>#}
                        {#                        </div>#}

                        <div class="card pull-up">
                            <div class="card-header">
                                <h4 class="card-title blue">{% trans "Product Inventory" %}</h4>
                                <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                <div class="heading-elements">
                                    <ul class="list-inline mb-0">
                                        <li>
                                            <a class="btn btn-sm btn-white danger box-shadow-1 round btn-min-width pull-right"
                                               href="/management/instrument_management/"
                                               target="_blank">{% trans "go to RESTOCK" %}<i
                                                    class="ft-bar-chart pl-1"></i></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-content collapse show">
                                <div class="card-body">
                                    <div id="vertical-bar2" class="height-400 BarChartShadow vertical-bar2"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--/ Revenue, Hit Rate & Deals -->
                <!-- Emails Products & Avg Deals -->
                <div class="row">
                    <div class="col-xl-3 col-lg-3 col-md-12">
                        <div class="card total-card pull-up"
                             onclick="window.location.href='{% url "management:instrument_management" %}'">
                            <div class="card-content">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="align-self-top">
                                            <i class="icon-eye icon-opacity info font-large-4"></i>
                                        </div>
                                        <div class="media-body text-right align-self-bottom mt-3">
                                            <span class="d-block mb-1 font-medium-1">{% trans "Total Instruments" %}</span>
                                            <h1 class="info mb-0">{{ instruments.count }}</h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-12">
                        <div class="card total-card pull-up"
                             onclick="window.location.href='{% url "management:review_management" %}'">
                            <div class="card-content">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="align-self-top">
                                            <i class="icon-users icon-opacity warning font-large-4"></i>
                                        </div>
                                        <div class="media-body text-right align-self-bottom mt-3">
                                            <span class="d-block mb-1 font-medium-1">{% trans "Total Customers" %}</span>
                                            <h1 class="warning mb-0">{{ users.count }}</h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-3 col-lg-3 col-md-12">
                        <div class="card total-card pull-up"
                             onclick="window.location.href='{% url "management:cart_management" %}'">
                            <div class="card-content">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="align-self-top">
                                            <i class="icon-basket-loaded icon-opacity success font-large-4"></i>
                                        </div>
                                        <div class="media-body text-right align-self-bottom mt-3">
                                            <span class="d-block mb-1 font-medium-1">{% trans "Cart Items" %}</span>
                                            <h1 class="success mb-0">{{ carts.count }}</h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-12">
                        <div class="card total-card pull-up"
                             onclick="window.location.href='{% url "management:order_management_all" %}'">
                            <div class="card-content">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="align-self-top">
                                            <i class="icon-wallet icon-opacity danger font-large-4"></i>
                                        </div>
                                        <div class="media-body text-right align-self-bottom mt-3">
                                            <span class="d-block mb-1 font-medium-1">{% trans "Total Revenue" %}</span>
                                            <h1 class="danger mb-0">$
                                                {% widthratio 0 1 0 as total %}
                                                {% for order_item in order_items %}
                                                    {% if not forloop.last %}
                                                        {% widthratio order_item.instrument.price 1 order_item.quantity as price %}
                                                        {% widthratio total|add:price 1 1 as total %}
                                                    {% else %}
                                                        {% widthratio order_item.instrument.price 1 order_item.quantity as price %}
                                                        {% widthratio total|add:price 1 1 %}
                                                    {% endif %}
                                                {% endfor %}
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-3 col-lg-6 col-12">
                        <div class="card total-card pull-up"
                             onclick="window.location.href='{% url "management:order_management_delivered" %}'">
                            <div class="card-content">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="media-body text-left align-self-bottom mt-3">
                                            <span class="d-block mb-1 font-medium-1">{% trans "Completed Orders" %}</span>
                                            <h1 class="danger mb-0">{{ orders.count }}</h1>
                                        </div>
                                        <div class="align-self-top">
                                            <i class="icon-tag icon-opacity danger font-large-4"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6 col-12">
                        <div class="card total-card pull-up"
                             onclick="window.location.href='{% url "management:post_management" %}'">
                            <div class="card-content">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="media-body text-left align-self-bottom mt-3">
                                            <span class="d-block mb-1 font-medium-1">{% trans "Blogs" %}</span>
                                            <h1 class="success mb-0">{{ blogs.count }}</h1>
                                        </div>
                                        <div class="align-self-top">
                                            <i class="icon-earphones-alt icon-opacity success font-large-4"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-3 col-lg-6 col-12">
                        <div class="card total-card pull-up"
                             onclick="window.location.href='{% url "management:order_management_placed" %}'">
                            <div class="card-content">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="media-body text-left align-self-bottom mt-3">
                                            <span class="d-block mb-1 font-medium-1">{% trans "Uncompleted Orders" %}</span>
                                            <h1 class="warning mb-0">{{ uncompleted_orders.count }}</h1>
                                        </div>
                                        <div class="align-self-top">
                                            <i class="icon-speedometer icon-opacity warning font-large-4"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6 col-12">
                        <div class="card total-card pull-up"
                             onclick="window.location.href='{% url "management:wishlist_management" %}'">
                            <div class="card-content">
                                <div class="card-body">
                                    <div class="media d-flex">
                                        <div class="media-body text-left align-self-bottom mt-3">
                                            <span class="d-block mb-1 font-medium-1">{% trans "Wishlist Items" %}</span>
                                            <h1 class="info mb-0">{{ wishlist.count }}</h1>
                                        </div>
                                        <div class="align-self-top">
                                            <i class="icon-like icon-opacity info font-large-4"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--/ Emails Products & Avg Deals -->

            </div>
        </div>
    </div>
{% endblock %}
<!-- END: Content-->

{% block scripts %}
    <script type="text/javascript">
        if ('ontouchstart' in document.documentElement) document.write("<script src='/static/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
    </script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>

{% endblock %}


{% block dashboard_js %}
    {#    <script src="{% static 'assets/js/jquery-ui.custom.min.js' %}"></script>#}
    <script>
        // fix index bottom black
        var myIdElement = document.getElementById("main-container");
        var beforeStyle = window.getComputedStyle(myIdElement, ":before").height;
        {#console.log(Number(beforeStyle.replace("px", "")));#}
        {#console.log($(".breadcrumbs").height())#}
        let max_height = Number(beforeStyle.replace("px", ""))
            - Number($(".breadcrumbs").height()) - Number($(".navbar").height());
        $(".page-content").css("max-height", max_height);
    </script>
    <!-- BEGIN: Vendor JS-->
    <script src="{% static "assets_backend/vendors/js/vendors.min.js" %}" type="text/javascript"></script>
    <!-- BEGIN Vendor JS-->

    <!-- BEGIN: Theme JS-->
    <script src="{% static "assets_backend/js/core/app-menu.js" %}" type="text/javascript"></script>
    <script src="{% static "assets_backend/js/core/app.js" %}" type="text/javascript"></script>
    <!-- END: Theme JS-->

    <!-- BEGIN: Page Vendor JS-->
    <script src="{% static "assets_backend/vendors/js/charts/chartist.min.js" %}" type="text/javascript"></script>
    <script src="{% static "assets_backend/vendors/js/charts/chartist-plugin-tooltip.js" %}"
            type="text/javascript"></script>
    <!-- END: Page Vendor JS-->

    <script>
        jQuery(function ($) {

            function ajaxFetchRevenue() {
                let revenue_data;
                $.ajax({
                    url: "/api/revenue_month/",
                    method: 'GET',
                    headers: {
                        'X-CSRFTOKEN': '{{ csrf_token }}'
                    },
                    async: false,
                    success: function (data) {
                        {#data[2] = [0, 0, 0, 230689, 0, 0, 0, 0, 0, 0, 0, 0];#}
                        revenue_data = data[0];
                    },
                    error: function () {
                        alert('Error! Check console!');
                    }

                });
                return revenue_data
            }

            // We calculate the function for ARIMA Model, So we just use the formula with parameters
            function ARIMA_PREDICT(input_list) {
                //parameters
                let a0 = 4.857e+04;
                let a1 = -2.341e+04;
                let b1 = -8.095e+04;
                let a2 = -5.39e+04;
                let b2 = 1.536e+04;
                let w = 0.7852;

                {#let a0 = 9.625e+04#}
                {#let a1 = 2.471e+04#}
                {#let b1 = -1.274e+05#}
                {#let a2 = -9.78e+04#}
                {#let b2 = -5.7e+04#}
                {#let w = 0.8233#}

                function calculate(x) {
                    return a0 + a1 * Math.cos(x * w) + b1 * Math.sin(x * w) +
                        a2 * Math.cos(2 * x * w) + b2 * Math.sin(2 * x * w)
                }

                let revenue_predict = []
                for (let input of input_list) {
                    if (input === 0) {
                        revenue_predict.push(0);
                    } else {
                        if (calculate(input) < 0) {
                            revenue_predict.push(0);
                        } else {
                            revenue_predict.push(calculate(input));
                        }
                    }
                }

                return revenue_predict;
            }

            {#let fetch_revenue = [0, 0, 12500.0, 53940.0, 70855.98999999999, 273391.93, 0, 0, 0, 0, 0, 0]#}
            let fetch_revenue = ajaxFetchRevenue();

            console.log(ARIMA_PREDICT(fetch_revenue), fetch_revenue);
            {#let all_product1 = [0, 0, 680, 1400, 1800, 3600, 8000, 16000, 18000, 20000, 24000, 28000]#}
            {#let all_product2 = [0, 0, 680, 1400, 1800, 3600, 8000, 8000, 8000, 8000, 8000, 8000]#}
            let all_product1 = ARIMA_PREDICT(fetch_revenue);
            let all_product2 = fetch_revenue;
            let all_product3 = []
            for (let i = 0; i < 12; i++) {
                all_product1[i] = all_product1[i] + 2000;
            }
            let all_product = [all_product1, all_product2, all_product3]
            var lineGradientChart1 = new Chartist.Line('#gradient-line-chart1', {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'],
                series:
                    [{
                        name: 'series-1',
                        data: all_product2
                    }, {
                        name: 'series-2',
                        data: all_product1
                    },]
            }, {
                series: {
                    'series-1': {
                        low: 0,
                        fullWidth: true,
                        onlyInteger: true,
                        axisY: {
                            low: 0,
                            scaleMinSpace: 50,
                        },
                        axisX: {
                            showGrid: false
                        },
                        lineSmooth: Chartist.Interpolation.simple({
                            divisor: 2
                        }),
                        plugins: [
                            Chartist.plugins.tooltip({
                                appendToBody: true,
                                pointClass: 'ct-point-circle-transperent'
                            })
                        ]
                    },
                    'series-2': {
                        low: 0,
                        showArea: true,
                        showPoint: false,
                        fullWidth: true
                    }
                }

            });
            lineGradientChart1.on('created', function (data) {
                var defs = data.svg.querySelector('defs') || data.svg.elem('defs');
                defs.elem('linearGradient', {
                    id: 'lineLinear1',
                    {#x1: 0,#}
                    {#y1: 0,#}
                    {#x2: 1,#}
                    {#y2: 0#}
                }).elem('stop', {
                    offset: '0%',
                    'stop-color': 'rgba(250,116,137,0.1)'
                }).parent().elem('stop', {
                    offset: '10%',
                    'stop-color': 'rgba(250,116,137,1)'
                }).parent().elem('stop', {
                    offset: '80%',
                    'stop-color': 'rgba(173,86,241, 1)'
                }).parent().elem('stop', {
                    offset: '98%',
                    'stop-color': 'rgba(173,86,241, 0.1)'
                });
                return defs;
            }).on('draw', function (data) {
                var circleRadius = 10;
                if (data.type === 'point') {
                    var circle = new Chartist.Svg('circle', {
                        cx: data.x,
                        cy: data.y,
                        'ct:value': data.y,
                        r: circleRadius,
                        class: 'ct-point-circle-transperent'
                    });
                    data.element.replace(circle);
                }
                if (data.type === 'line') {
                    data.element.animate({
                        d: {
                            begin: 1000,
                            dur: 1000,
                            from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),
                            to: data.path.clone().stringify(),
                            easing: Chartist.Svg.Easing.easeOutQuint
                        }
                    });
                }
            });

            {#第一个Area图表#}
            let product_WC;
            $.ajax({
                url: "/api/order_data/",
                method: 'GET',
                headers: {
                    'X-CSRFTOKEN': '{{ csrf_token }}'
                },
                async: false,
                success: function (data) {
                    console.log(data);
                    product_WC = data;
                },
                error: function () {
                    alert('Error! Check console!');
                }

            });
            let product_W = [5, 10, 15, 20, 30, 20, 50, 60, 75, 120, 110, 200]
            let product_C = [20, 20, 25, 40, 30, 50, 55, 65, 80, 100, 110, 120]
            var projectStats = new Chartist.Line('#project-stats', {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'],
                series:
                    {#revenue_data#}
                product_WC
            }, {
                lineSmooth: Chartist.Interpolation.simple({
                    divisor: 2
                }),
                fullWidth: true,
                showArea: true,
                chartPadding: {
                    right: 35
                },
                axisX: {
                    showGrid: false,
                },
                axisY: {
                    labelInterpolationFnc: function (value) {
                        return value + '';
                    },
                    scaleMinSpace: 10,
                    showGrid: true,
                },
                plugins: [
                    Chartist.plugins.tooltip({
                        appendToBody: true,
                        pointClass: 'ct-point'
                    })
                ],
                low: 0,
                onlyInteger: true,
            });

            projectStats.on('created', function (data) {
                var defs = data.svg.querySelector('defs') || data.svg.elem('defs');
                defs.elem('linearGradient', {
                    id: 'area-gradient',
                    x1: 1,
                    y1: 0,
                    x2: 0,
                    y2: 0
                }).elem('stop', {
                    offset: 0,
                    'stop-color': 'rgba(248, 161, 236, 0.5)'
                }).parent().elem('stop', {
                    offset: 1,
                    'stop-color': 'rgba(115, 150, 255, 0.5)'
                });
                return defs;
            }).on('draw', function (data) {
                var circleRadius = 9;
                if (data.type === 'point') {
                    var circle = new Chartist.Svg('circle', {
                        cx: data.x,
                        cy: data.y,
                        'ct:value': data.value.y,
                        r: circleRadius,
                        class: data.value.y === 180 || data.value.y === 150 ? 'ct-point-circle ct-point' : 'ct-point ct-point-circle-transperent'
                    });
                    data.element.replace(circle);
                }
                if (data.type === 'line' || data.type == 'area') {
                    data.element.animate({
                        d: {
                            begin: 1000,
                            dur: 1000,
                            from: data.path.clone().scale(1, 0).translate(0, data.chartRect.height()).stringify(),
                            to: data.path.clone().stringify(),
                            easing: Chartist.Svg.Easing.easeOutQuint
                        }
                    });
                }
            });

            {# quantity for products #}
            let my_product_list = [[], []]
            let my_product_title_list = []
            for (let i = 0; i < 12; i++) {
                my_product_list[0].push("P" + i);
                {#if (i % 2 === 0) {#}
                {#    my_product_list[1].push(10);} else {#}
                {#    my_product_list[1].push(20);}}#}
            }
            {% for qu in quantities %}
                my_product_title_list.push("{{ qu.name }}")
                my_product_list[1].push({{ qu.quantity }})
            {% endfor %}

            var verticalBar2 = new Chartist.Bar('#vertical-bar2', {
                labels: my_product_list[0],
                series: [
                    my_product_list[1]
                ]
            }, {
                axisY: {
                    labelInterpolationFnc: function (value) {
                        return (value) + '';
                    },
                    scaleMinSpace: 50,
                },
                axisX: {
                    showGrid: false,
                    labelInterpolationFnc: function (value, index) {
                        return index % 1 === 0 ? value : null;
                    }
                },
                plugins: [
                    Chartist.plugins.tooltip({
                        appendToBody: true
                    })
                ]
            });
            verticalBar2.on('draw', function (data) {
                if (data.type === 'bar') {
                    data.element.attr({
                        style: 'stroke-width: 10px',
                        y1: 365,
                        x1: data.x1 + 0.001
                    });
                    data.group.append(new Chartist.Svg('circle', {
                        cx: data.x2,
                        cy: data.y2,
                        r: 5
                    }, 'ct-slice-pie'));
                }
            });
            verticalBar2.on('created', function (data) {
                var defs = data.svg.querySelector('defs') || data.svg.elem('defs');
                defs.elem('linearGradient', {
                    id: 'barGradient1',
                    x1: 0,
                    y1: 0,
                    x2: 0,
                    y2: 1
                }).elem('stop', {
                    offset: 0,
                    'stop-color': 'rgba(253,99,107,1)'
                }).parent().elem('stop', {
                    offset: 1,
                    'stop-color': 'rgba(253,99,107, 0.6)'
                });
                return defs;
            });

            {#TODO: 库存name未指定#}
            {#let nodes = $('.vertical-bar2 > .ct-labels > .ct-label');#}
            {#console.log(nodes.children())#}
            {#for (let node of nodes) {#}
            {#    console.log($(node).children().prop("class"), node.indexOf(nodes));#}
            {#    $(node).children().prop("title", my_product_title_list[node.indexOf(nodes)])}#}
            /*************************************************
             *               Analytics donut               *
             *************************************************/

            var analyticsDonutChart = new Chartist.Pie('#Analytics-donut-chart', {
                series: [100],
                labels: ['iOS']
            }, {
                donut: true,
                labelInterpolationFnc: function (value) {
                    return '\ue9c9';
                },
                donutSolid: true,
                total: 100,
                donutWidth: 5,
            });

            analyticsDonutChart.on('draw', function (data) {
                if (data.type === 'label') {
                    if (data.index === 0) {
                        data.element.attr({
                            dx: data.element.root().width() / 2,
                            dy: (data.element.root().height() + (data.element.height() / 4)) / 2,
                            class: 'ct-label',
                            'font-family': 'feather'
                        });
                    } else {
                        data.element.remove();
                    }
                }
            });

            // For the sake of the example we update the chart every time it's created with a delay of 8 seconds
            analyticsDonutChart.on('created', function (data) {
                var defs = data.svg.querySelector('defs') || data.svg.elem('defs');
                defs.elem('linearGradient', {
                    id: 'donutGradient1',
                    x1: 0,
                    y1: 1,
                    x2: 0,
                    y2: 0
                }).elem('stop', {
                    offset: '0%',
                    'stop-color': 'rgba(250,203,205,1)'
                }).parent().elem('stop', {
                    offset: '95%',
                    'stop-color': 'rgba(250,203,205, 0.7)'
                });
                return defs;


            });


            let weekday_order = [];
            {% for i in weekday_order %}
                weekday_order.push(Number({{ i }}));
            {% endfor %}
            let weekday_order_max = 0;
            weekday_order.forEach(item => weekday_order_max = item > weekday_order_max ? item : weekday_order_max)
            var lineOptions = {
                axisX: {
                    showLabel: false,
                    showGrid: false,

                },
                axisY: {
                    showLabel: false,
                    showGrid: false,
                    low: 0,
                    high: weekday_order_max,
                    offset: 0
                },
                lineSmooth: new Chartist.Interpolation.simple({
                    divisor: 2
                }),
                plugins: [
                    Chartist.plugins.tooltip({
                        appendToBody: false,
                        pointClass: 'ct-point'
                    })
                ],
                fullWidth: true
            };
            var ProjectStatsLine1 = new Chartist.Line('#progress-stats-line-chart1', {
                series: [
                    weekday_order
                ]
            }, lineOptions);

            ProjectStatsLine1.on('created', function (data) {
                var defs = data.svg.querySelector('defs') || data.svg.elem('defs');
                defs.elem('linearGradient', {
                    id: 'lineLinearStats1',
                    x1: 0,
                    y1: 0,
                    x2: 1,
                    y2: 0
                }).elem('stop', {
                    offset: '0%',
                    'stop-color': 'rgba(0,230,175,0.1)'
                }).parent().elem('stop', {
                    offset: '10%',
                    'stop-color': 'rgba(0,230,175,1)'
                }).parent().elem('stop', {
                    offset: '80%',
                    'stop-color': 'rgba(0,206,249, 1)'
                }).parent().elem('stop', {
                    offset: '98%',
                    'stop-color': 'rgba(0,206,249, 0.1)'
                });

                return defs;


            }).on('draw', function (data) {
                var circleRadius = 5;
                if (data.type === 'point') {
                    var circle = new Chartist.Svg('circle', {
                        cx: data.x,
                        cy: data.y,
                        'ct:value': data.y,
                        r: circleRadius,
                        class: data.value.y === 15 ? 'ct-point ct-point-circle' : 'ct-point ct-point-circle-transperent'
                    });
                    data.element.replace(circle);
                }
            });


            // Chat scrollbar
            var sidebar_fixed = new PerfectScrollbar(".chats", {
                wheelPropagation: false
            });


        })


        $('li:contains(Dashboard)').attr("class", "active");
    </script>

    <style>


        .pull-right[href="/management/instrument_management/"] {
            line-height: 1;
            padding: 0.5rem 1rem !important;
            -webkit-box-shadow: 0 7px 12px 0 rgb(62 57 107 / 16%) !important;
            box-shadow: 0 7px 12px 0 rgb(62 57 107 / 16%) !important;
        }

        {% if compare_monthly.0 == 0 %}
            .pull-right[href="/management/order_management/all/"] {
                background-color: #ffffff !important;
                color: #fd6471 !important;
                font-size: .875rem;
                line-height: 1;
                padding: 0.5rem 1rem !important;
                border-radius: 20px !important;
                border: #f7650e !important;
                -webkit-box-shadow: 0 7px 12px 0 rgb(62 57 107 / 16%) !important;
                box-shadow: 0 7px 12px 0 rgb(62 57 107 / 16%) !important;
            }
        {% else %}
            .pull-right[href="/management/order_management/all/"] {
                background-color: #f7650e !important;
                color: #fff !important;
                font-size: .875rem;
                line-height: 1;
                padding: 0.5rem 1rem !important;
                border-radius: 20px !important;
                border: #f7650e !important;
                -webkit-box-shadow: 0 7px 12px 0 rgb(62 57 107 / 16%) !important;
                box-shadow: 0 7px 12px 0 rgb(62 57 107 / 16%) !important;
            }
        {% endif %}
    </style>

{% endblock %}

